(function(t){function e(e){for(var s,n,o=e[0],l=e[1],c=e[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0738":function(t,e,a){"use strict";a("ff39")},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=a("7496"),r=a("40dc"),n=a("f6c4"),o=function(){var t=this,e=t._self._c;return e(i["a"],[e(r["a"],{attrs:{app:"",color:"#11B980",dark:""}}),e(n["a"],{staticClass:"my-14 mx-auto main-content"},[e("router-view")],1)],1)},l=[],c={name:"App",data:()=>({})},d=c,u=(a("0738"),a("2877")),p=Object(u["a"])(d,o,l,!1,null,"75eb8860",null),h=p.exports,g=a("8c4f"),m=a("8336"),f=a("62ad"),v=a("2e4b"),y=a("e449"),_=a("0fd9"),b=a("8dd9"),w=a("8654"),x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e(b["a"],{staticClass:"d-flex justify-space-around align-center pa-4",attrs:{color:"grey lighten-2",rounded:"lg",height:"85"}},[e(y["a"],{attrs:{"offset-y":"","nudge-bottom":"8","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(w["a"],t._g(t._b({staticClass:"flex-grow-0",attrs:{value:t.dateRangeText,readonly:"",label:"Search by release date",solo:"",outlined:"","append-icon":"mdi-calendar",dense:"","hide-details":"","background-color":"white"}},"v-text-field",s,!1),a))]}}])},[e(v["a"],{attrs:{range:""},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e(m["a"],{staticClass:"text-capitalize white--text",attrs:{color:"#549DF2",rounded:"",loading:t.loading,disabled:t.loading},on:{click:t.search}},[t._v("search")])],1),e(_["a"],{staticClass:"my-14"},t._l(t.list,(function(a,s){return e(f["a"],{key:s,attrs:{cols:"4"}},[e("movie-card",{attrs:{movie:a,loading:t.loading,width:"320",height:"211"}})],1)})),1),e("pagination",{attrs:{totalPages:t.totalPages,totalItems:t.totalItems},on:{input:t.search},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},C=[],O=a("b0af"),P=a("cc20"),S=a("132d"),k=a("adda"),j=a("1d4d"),R=a("3129"),$=a("2fa4"),M=function(){var t=this,e=t._self._c;return e(O["a"],{staticClass:"mx-auto d-flex flex-row pa-1",attrs:{color:"grey lighten-4",height:t.height,width:t.width,to:t.movie.id?{name:"Detail",params:{movieId:t.movie.id}}:null}},[e("div",{staticClass:"d-flex flex-grow-1"},[t.placeholder?e(k["a"],{staticClass:"white",attrs:{src:"https://image.tmdb.org/t/p/w154"+t.movie.poster_path,"max-width":"128","min-width":"128"}}):e(R["a"],{attrs:{"min-width":"128",type:"image"}}),e("div",{staticClass:"d-flex flex-column pa-2 flex-grow-1"},[t.placeholder?e("h4",[t._v(t._s(t.movie.title))]):e(R["a"],{attrs:{"min-width":"128",type:"heading"}}),e($["a"]),t.placeholder?e("div",{staticClass:"caption"},[e("div",{staticClass:"mb-1"},[e(S["a"],{attrs:{size:"18"}},[t._v("mdi-calendar")]),t._v(" "+t._s(t.movie.release_date)+" ")],1),t._l(t.movie.genre_ids,(function(a){return e(P["a"],{key:a,staticClass:"mr-1",attrs:{"x-small":""}},[t._v(" "+t._s(t.$store.state.genres[a])+" ")])}))],2):e(R["a"],{attrs:{"min-width":"128",type:"paragraph"}}),t.placeholder?e("div",{staticClass:"d-flex justify-space-between align-center mt-2"},[e(j["a"],{attrs:{color:"warning","empty-icon":"mdi-star-outline","full-icon":"mdi-star","half-icon":"mdi-star-half-full","half-increments":"",dense:"",length:"5",size:"16",value:t.getRateValue(t.movie.vote_average)}}),e("div",{staticClass:"caption text--secondary"},[t._v(t._s(t.movie.vote_average))])],1):e(R["a"],{attrs:{"min-width":"128",type:"text"}})],1)],1)])},I=[],D={props:{movie:{type:Object,default:()=>{}},loading:Boolean,width:{type:[String,Number],default:"295"},height:{type:[String,Number],default:"195"}},methods:{getRateValue(t){return Math.ceil(t)/10*5}},computed:{placeholder(){return!this.loading&&this.movie}}},T=D,N=Object(u["a"])(T,M,I,!1,null,null,null),z=N.exports,E=a("ce7e"),F=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex felx-column justify-center"},[e(m["a"],{staticClass:"text-capitalize",attrs:{text:"",color:"primary",disabled:t.isFirstPage,"min-width":"140"},on:{click:function(e){return t.change(-1)}}},[t._v("Previous Page")]),e(E["a"],{attrs:{vertical:""}}),e(m["a"],{staticClass:"text-capitalize",attrs:{text:"",color:"primary",disabled:t.isLastPage,"min-width":"140"},on:{click:function(e){return t.change(1)}}},[t._v("Next Page")])],1),e("div",{staticClass:"text-center text-caption text--secondary mt-2"},[t._v("Showing results "+t._s(t.showinResults))])])},L=[],Q={props:{value:{type:Number,default:1},totalPages:{type:Number,default:0},totalItems:{type:Number,default:0}},methods:{change(t){this.$emit("input",this.value+t)}},computed:{isLastPage(){return this.totalPages<=this.value},isFirstPage(){return this.value<=1},showinResults(){const t=20;let e=(this.value-1)*t,a=this.isLastPage?this.totalItems%t:e+t;return e+1+" - "+a}}},G=Q,U=Object(u["a"])(G,F,L,!1,null,null,null),V=U.exports,q={name:"Home",data(){return{dateRange:[],list:new Array(20).fill({}),show:!1,page:1,totalPages:0,totalItems:0,loading:!1}},methods:{async search(){this.loading=!0,this.updateQueryString();const t=await this.$db.getListOfMovies(this.dateRange,this.page);if(t){const{results:e,total_pages:a,total_results:s}=t;this.list=e,this.totalPages=a,this.totalItems=s}this.loading=!1},updateQueryString(){let{page:t,range:e}=this.getQueryString();if(this.page!=t||this.dateRange.toString()!=e.toString()){const t={page:this.page};this.dateRangeText&&(t["range"]=this.dateRangeText),this.$router.replace({path:"/",query:t})}},getQueryString(){let{page:t,range:e}=this.$route.query;t=+t>0?+t:1,e=decodeURI(e||"");const[a,s]=e.split(" ~ ");return e=Date.parse(a)&&Date.parse(s)?[a,s]:[],{page:t,range:e}}},computed:{dateRangeText(){return this.dateRange.join(" ~ ")}},components:{MovieCard:z,Pagination:V},beforeMount(){let{page:t,range:e}=this.getQueryString();this.page=t,this.dateRange=e,this.search()}},B=q,H=Object(u["a"])(B,x,C,!1,null,null,null),A=H.exports,J=a("0789"),K=function(){var t=this,e=t._self._c;return e("div",[e(b["a"],{staticClass:"d-flex flex-row pa-4 align-center",attrs:{color:"grey lighten-2",rounded:"lg",height:"85"}},[e(m["a"],{staticClass:"text-capitalize white--text",attrs:{color:"#549DF2",rounded:""},on:{click:function(e){return t.$router.go(-1)}}},[e(S["a"],{attrs:{left:""}},[t._v("mdi-arrow-left")]),t._v(" back ")],1),e("div",{staticClass:"ml-14"},[t.detail?[e("h3",[t._v(t._s(t.detail.title))]),e("div",[t._v(t._s(t.detail.tagline))])]:e(R["a"],{attrs:{"min-width":"300",type:"sentences"}})],2)],1),e("div",{staticClass:"mt-14"},[e("div",{staticClass:"d-flex"},[t.detail?e(k["a"],{staticClass:"rounded-lg grey lighten-4",attrs:{src:"https://image.tmdb.org/t/p/w342/"+t.detail.poster_path,"max-width":"342",width:"342",cover:"","min-height":"400"}}):e(R["a"],{attrs:{width:"330",height:"400",type:"image@2"}}),e("div",{staticClass:"flex-grow-1 ml-16 mr-4"},t._l(t.fields,(function(a,s){return e("div",{key:s,staticClass:"d-flex justify-space-between align-center mt-3"},[t.detail?[e("div",{staticClass:"font-weight-bold text-capitalize"},[t._v(t._s(a))]),e("div",{staticClass:"body-2",domProps:{innerHTML:t._s(t.getValue(s))}})]:[e(R["a"],{attrs:{"min-width":"80",type:"text"}}),e(R["a"],{attrs:{"min-width":"100",type:"text"}})]],2)})),0)],1),e("div",{staticClass:"mt-16"},[t.detail?[t._v(" "+t._s(t.detail.overview)+" ")]:e(R["a"],{attrs:{type:"paragraph"}})],2),e("div",{staticClass:"mt-16"},[e("div",{staticClass:"font-weight-bold mb-2"},[t._v("Credit:")]),e("div",[t._l(t.casts.slice(0,t.lengthOfCasts)||t.lengthOfCasts,(function(a,s){return[t.casts?e("span",{key:a+s,staticClass:"body-2 cast-name"},[t._v(t._s(a))]):e(R["a"],{key:a,staticClass:"d-inline-block mr-1",attrs:{type:"text","min-width":"80",tag:"div"}})]})),t.casts.length>t.lengthOfCasts?e(m["a"],{staticClass:"pa-0 cast-name text-lowercase body-2",attrs:{color:"primary",text:"",tag:"span",ripple:!1},on:{click:function(e){t.lengthOfCasts=t.casts.length}}},[t._v(" and "+t._s(t.casts.length-t.lengthOfCasts)+" more. ")]):t._e(),e(J["a"])],2)])])],1)},W=[],X={data(){return{detail:null,casts:"",lengthOfCasts:10,fields:{budget:"budget",revenue:"revenue",release_date:"release",runtime:"runtime",vote_average:"score",genres:"genres",imdb_id:"IMDB",homepage:"homepage"}}},methods:{getValue(t){const e=this.detail[t];if(["budget","revenue"].includes(t))return Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e);if("vote_average"==t)return`${+e.toFixed(1)} (${this.detail.vote_count} votes)`;if("runtime"==t){const t=Math.floor(e/60),a=e%60;return`${t}h ${a}m`}if("genres"==t)return e.map(t=>t.name).toString();if(["homepage","imdb_id"].includes(t)){const a="imdb_id"==t?"https://www.imdb.com/title/"+e:e;return`<a href='${a}'>link</a>`}return e},async initCasts(t){const e=await this.$db.getMovieCredits(t);e&&(this.casts=e.cast.sort((t,e)=>e.popularity-t.popularity).map(t=>t.name))}},async mounted(){const{movieId:t}=this.$route.params;if(t){let e=await this.$db.getMovieDetail(t);e&&(this.detail=e),this.initCasts(t)}}},Y=X,Z=(a("8aa9"),Object(u["a"])(Y,K,W,!1,null,null,null)),tt=Z.exports;s["a"].use(g["a"]);const et=[{path:"/",name:"Home",component:A},{path:"/detail/:movieId",name:"Detail",component:tt},{path:"*",redirect:"/"}],at=new g["a"]({mode:"history",base:"/",routes:et});var st=at,it=a("2f62");s["a"].use(it["a"]);var rt=new it["a"].Store({state:{genres:{}},mutations:{SET_GENRES(t,e){e.forEach(({id:e,name:a})=>t.genres[e]=a)}},actions:{}}),nt=a("f309");s["a"].use(nt["a"]);var ot=new nt["a"]({}),lt=a("bc3a"),ct=a.n(lt);const dt="f62f750b70a8ef11dad44670cfb6aa57";function ut(t){return t.data?Promise.resolve(t.data):Promise.resolve(!1)}function pt(t){console.log(t.code)}class ht{constructor(t,e){this.store=t,this.api=ct.a.create({baseURL:e,responseType:"json"}),this.api.interceptors.response.use(t=>ut(t),t=>pt(t,this)),this.api.interceptors.request.use(t=>(t.params={...t.params,api_key:dt},t)),this.updateGenres()}async updateGenres(){const t=await this.api.get("/genre/movie/list");null!==t&&void 0!==t&&t.genres&&this.store.commit("SET_GENRES",t.genres)}getListOfMovies(t,e){const a={};return 2==(null===t||void 0===t?void 0:t.length)&&(a["release_date.gte"]=t[0],a["release_date.lte"]=t[1],a["with_release_type"]=1),e>0&&(a["page"]=e),this.api.get("/discover/movie",{params:a})}getMovieDetail(t){return this.api("/movie/"+t)}getMovieCredits(t){return this.api(`/movie/${t}/credits`)}}var gt={install(t,e){t.prototype.$db=new ht(e,"https://api.themoviedb.org/3/")}};s["a"].config.productionTip=!1,s["a"].use(gt,rt),new s["a"]({router:st,store:rt,vuetify:ot,render:t=>t(h)}).$mount("#app")},"8aa9":function(t,e,a){"use strict";a("e206")},e206:function(t,e,a){},ff39:function(t,e,a){}});
//# sourceMappingURL=app.f24ce4cc.js.map